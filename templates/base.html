<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Expense Tracker</title>

<style>
/* ---------- BRIGHT THEME (LIGHT DEFAULT) ---------- */
:root {
  --primary:#6366f1;
  --accent:#0ea5e9;
  --accent-2:#22c55e;

  --danger:#dc2626;
  --danger-text:#b91c1c;

  --nav-bg:#ffffff;
  --border:#e5e7eb;

  --text-main:#111827;
  --text-muted:#6b7280;

  --page-bg-1:#eef2ff;
  --page-bg-2:#e0f2fe;

  --card-bg:#ffffff;

  --success-bg:#d1fae5;
  --success-text:#065f46;
  --error-bg:#fee2e2;
  --error-text:#7f1d1d;
}

/* ---------- DARK THEME ---------- */
[data-theme="dark"] {
  --primary:#818cf8;
  --accent:#38bdf8;
  --accent-2:#4ade80;

  --nav-bg:#0f172a;

  --text-main:#e5e7eb;
  --text-muted:#9ca3af;

  --page-bg-1:#020617;
  --page-bg-2:#020617;

  --card-bg:#111827;

  --border:#1f2937;

  --success-bg:#052e16;
  --success-text:#86efac;
  --error-bg:#3f0d12;
  --error-text:#fecaca;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:"Segoe UI",Tahoma,Verdana,sans-serif;
  background:linear-gradient(135deg,var(--page-bg-1),var(--page-bg-2));
  min-height:100vh;
  color:var(--text-main);
}

/* ---------- NAVBAR ---------- */
.navbar{
  position:sticky;
  top:0;
  height:72px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 20px;
  background:var(--nav-bg);
  border-bottom:3px solid;
  border-image:linear-gradient(90deg,var(--primary),var(--accent),var(--accent-2)) 1;
  box-shadow:0 6px 14px rgba(0,0,0,.12);
  z-index:1000;
}

.logo{
  font-size:20px;
  font-weight:800;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* ---------- NAV LINKS ---------- */
.nav-links{
  display:flex;
  gap:20px;
  align-items:center;
}

.nav-links a{
  font-size:14px;
  font-weight:600;
  color:var(--text-muted);
  text-decoration:none;
  position:relative;
  padding:6px 2px;
}

.nav-links a:hover{color:var(--primary)}

.nav-links a::after{
  content:"";
  position:absolute;
  left:0;bottom:-6px;
  width:0;height:3px;
  background:linear-gradient(90deg,var(--primary),var(--accent));
  transition:.2s;
  border-radius:3px;
}

.nav-links a:hover::after{width:100%}

.nav-links a.delete{color:var(--danger-text)}

/* ---------- THEME DROPDOWN ---------- */
.theme-select{
  border:1px solid var(--border);
  background:transparent;
  padding:6px 10px;
  border-radius:8px;
  font-size:13px;
  cursor:pointer;
  color:var(--text-muted);
}
.theme-select option{color:#000}

/* ---------- PROFILE DROPDOWN ---------- */
.profile-wrapper{position:relative}

.profile-btn{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--card-bg);
  cursor:pointer;
  font-size:13px;
  color:var(--text-main);
}

.avatar-bubble{
  width:28px;
  height:28px;
  border-radius:50%;
  background:linear-gradient(135deg,var(--primary),var(--accent));
  color:#fff;
  font-weight:900;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:13px;
}

.profile-menu{
  position:absolute;
  top:42px;
  right:0;
  min-width:160px;
  background:var(--card-bg);
  border:1px solid var(--border);
  border-radius:12px;
  box-shadow:0 16px 40px rgba(0,0,0,.25);
  display:none;
  z-index:10000;
}

.profile-menu.open{display:block}

.profile-menu a{
  display:block;
  padding:12px 14px;
  font-size:13px;
  font-weight:600;
  color:var(--text-main);
  text-decoration:none;
}

.profile-menu a:hover{
  background:rgba(79,70,229,.1);
}

.profile-menu .logout-link{
  color:var(--danger);
}

/* ---------- MOBILE ---------- */
.menu-btn{display:none;font-size:22px;cursor:pointer}

@media(max-width:820px){
  .nav-links{
    position:fixed;
    top:72px;right:0;
    width:240px;
    height:calc(100vh - 72px);
    flex-direction:column;
    padding:20px;
    background:var(--card-bg);
    transform:translateX(100%);
    transition:.25s;
    box-shadow:-10px 0 28px rgba(0,0,0,.25);
  }
  .nav-links.open{transform:translateX(0)}
  .menu-btn{display:block}
}
</style>
</head>

<body>

<nav class="navbar">
  <div class="logo">üí∞ ExpenseTracker</div>

  <span class="menu-btn" onclick="toggleMenu()">‚ò∞</span>

  <div class="nav-links" id="navMenu">
    <a href="/ExpenseTracker/Home">Home</a>
    <a href="/ExpenseTracker/AddExpense">Add Expense</a>
    <a href="/ExpenseTracker/GetExpenses">View Expenses</a>
    <a href="/ExpenseTracker/DeleteOldExpenses" class="delete">Delete</a>

    <!-- THEME DROPDOWN -->
    <select class="theme-select" id="themeSelect" onchange="applyTheme(this.value)">
      <option value="system">üñ•Ô∏è System</option>
      <option value="light">‚òÄÔ∏è Bright</option>
      <option value="dark">üåô Dark</option>
    </select>

    <!-- üë§ PROFILE DROPDOWN -->
    <div class="profile-wrapper">
      <button class="profile-btn" onclick="toggleProfileMenu(event)">
        <div class="avatar-bubble">
          {{ username[0]|upper if username else 'U' }}
        </div>
        {{ username }}
      </button>

      <div class="profile-menu" id="profileMenu">
        <a href="/ExpenseTracker/Profile">üë§ Profile</a>
        <a href="/ExpenseTracker/logout" class="logout-link">üö™ Logout</a>
      </div>
    </div>
  </div>
</nav>

<script>
/* ---- MOBILE MENU ---- */
function toggleMenu(){
  document.getElementById("navMenu").classList.toggle("open");
}

/* ---- PROFILE DROPDOWN ---- */
function toggleProfileMenu(e){
  e.stopPropagation();
  document.getElementById("profileMenu").classList.toggle("open");
}

/* Close dropdown when clicking outside */
document.addEventListener("click",()=>{
  document.getElementById("profileMenu").classList.remove("open");
});

/* ---- SYSTEM THEME DETECTION ---- */
const mediaQuery = window.matchMedia("(prefers-color-scheme: dark)");

function setSystemTheme(){
  document.body.setAttribute("data-theme", mediaQuery.matches ? "dark" : "light");
}

/* ---- APPLY THEME ---- */
function applyTheme(mode){
  localStorage.setItem("theme-mode", mode);
  document.getElementById("themeSelect").value = mode;

  if(mode === "system"){
    setSystemTheme();
    mediaQuery.addEventListener("change", setSystemTheme);
  } else {
    mediaQuery.removeEventListener("change", setSystemTheme);
    document.body.setAttribute("data-theme", mode);
  }
}

/* ---- LOAD SAVED THEME ---- */
applyTheme(localStorage.getItem("theme-mode") || "system");
</script>

</body>
</html>
